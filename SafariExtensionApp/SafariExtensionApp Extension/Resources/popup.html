<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="popup.css">
    <script type="module" src="popup.js"></script>
</head>
<body>
    <div class="header">
        <h1>🚀 NativeFoundationModels</h1>
        <div id="status-indicator" class="status-indicator">
            <span class="status-dot"></span>
            <span id="status-text">Checking...</span>
        </div>
    </div>

    <div class="section">
        <h3>🔍 Extension Status</h3>
        <div id="extension-status" class="status-item">
            <span class="label">Extension:</span>
            <span id="extension-active" class="value">⏳ Checking...</span>
        </div>
        <div id="permissions-status" class="status-item">
            <span class="label">Permissions:</span>
            <span id="permissions-granted" class="value">⏳ Checking...</span>
        </div>
        <div id="content-script-status" class="status-item">
            <span class="label">Content Script:</span>
            <span id="content-script-active" class="value">⏳ Checking...</span>
        </div>
        <div id="api-status" class="status-item">
            <span class="label">API Available:</span>
            <span id="api-available" class="value">⏳ Checking...</span>
        </div>
    </div>

    <div class="section">
        <h3>🧪 Test API</h3>
        <button id="test-availability" class="btn btn-primary">Check Availability</button>
        <button id="test-completion" class="btn btn-secondary">Test Completion</button>
        <button id="test-streaming" class="btn btn-secondary">Test Streaming</button>
        
        <div class="input-group">
            <input type="text" id="test-prompt" placeholder="Enter test prompt..." value="Hello, how are you?">
        </div>
    </div>

    <div class="section">
        <h3>📊 Results</h3>
        <div id="results" class="results-area">
            <div class="placeholder">Test results will appear here...</div>
        </div>
    </div>

    <div class="section">
        <h3>⚙️ Troubleshooting</h3>
        <div id="troubleshooting" class="troubleshooting">
            <div class="help-item">
                <strong>If API is not available:</strong>
                <ol>
                    <li>Look for 🟡 yellow icon in Safari address bar</li>
                    <li>Click it and select "Always Allow on Every Website"</li>
                    <li>Refresh the page and test again</li>
                </ol>
            </div>
            <button id="request-permissions" class="btn btn-warning">Request Permissions</button>
            <button id="refresh-status" class="btn btn-outline">Refresh Status</button>
        </div>
    </div>

    <div class="footer">
        <small>Extension Version: 1.0 | Last Updated: <span id="last-updated">-</span></small>
    </div>
</body>
</html>
